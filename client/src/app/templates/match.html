<div ng-include="'app/components/navbar/navbar.html'"></div>

<div class="home-container">
    <div class="row ">
        <div class="col-md-10 highlight">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-md-4  match-label">Location</label>
                    <div class="col-md-6"><span>{{match.location}}</span></div>
                </div>

                <div class="form-group">
                    <label class="col-md-4  match-label">Start</label>
                    <div class="col-md-6">{{match.startTime | amCalendar }}</div>
                </div>

                <div class="form-group">
                    <label class="col-md-4  match-label">Sign-in time</label>
                    <div class="col-md-6">{{match.signinEarliest | amDateFormat:'hh:mm a' }} - {{match.signinLatest | amDateFormat:'hh:mm a'  }}</div>
                </div>
                <div class="form-group" ng-if="storage.currentUser.admin">
                    <label class="col-md-4  match-label">Sign-up link</label>
                    <div class="col-md-6">
                        <input class="form-control" value="{{match.signupLink}}">
                    </div>
                </div>
                <div class="form-group" ng-if="storage.currentUser.admin">
                    <label class="col-md-4  match-label">Sign-in code</label>
                    <div class="col-md-6">
                        <p>Print the following QR code</p>
                        <qrcode size="250" data="{{match.signinLink}}" href="{{match.signinLink}}"></qrcode>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6 col-md-offset-4">
                        <button ng-if="alreadyIn" disabled="disabled" type="button" class="btn btn-success">You have already signed up</button>
                        <button ng-if="!alreadyIn" type="button" class="btn btn-success" ui-sref="match-signup({matchId:match.id, matchCode: match.signupCode})">Sign Up</button>

                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6 col-md-offset-4">
                        <button ng-show="!leave" type="button" class="btn btn-warning" ng-click="askLeave()" >Ask for leave</button>
                        <button ng-show="leave" type="button" class="btn btn-info" ng-click="askLeave()" >Back in game</button>

                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
            <div class="col-md-6 col-md-offset-2 highlight">
                    <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Team</th>
                            <th>
                                Players already signed-up
                            </th>
                            <th>
                                Sign-in
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr dir-paginate="player in players | itemsPerPage: 30 ">
                            <td>{{$index + 1}}</td>
                            <td><input bs-switch ng-model="teams[player.playId]" type="checkbox"
                                       data-player-id="player.id"
                                       switch-size="mini" switch-label-width="0"
                                       ng-true-value="'red'" ng-false-value="'blue'"
                                       switch-active="{{storage.currentUser.admin || player.id == storage.currentUser.id}}"
                                       switch-label-width="0"
                                       switch-on-text="Red" switch-on-color="danger"
                                       switch-off-color="primary" switch-off-text="Blue"></td>
                            <td>
                                <span ng-if="player.id == storage.currentUser.id" class="glyphicon glyphicon-user" aria-hidden="true"></span>{{player.name}}<span class="label label-info" aria-hidden="true" ng-if="player.admin">C</span> <span class="label label-default" aria-hidden="true" ng-if="player.leave">leave</span> </td>
                            <td>
                                <span class="label label-default" aria-hidden="true" ng-if="player.signinTime == 0">not yet</span>
                                <span class="label label-success" aria-hidden="true" ng-if="player.signinOntime">on time</span>
                                <span class="label label-warning" aria-hidden="true" ng-if="player.signinLate">late</span>
                            </td>
                        </tr>
                        <tr ng-if="!players.length"><td colspan="2">No one has signed up. Be the first one!</td></tr>
                        </tbody>

                    </table>
                    <dir-pagination-controls></dir-pagination-controls>
                </div>

            </div>
    </div>
</div>